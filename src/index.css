@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Increase base font size for better readability */
  html {
    font-size: 18px; /* Default is 16px, this increases all rem-based sizes by 12.5% */
    overflow-y: auto; /* Only show scrollbar when content overflows */
  }
  
  /* When in phone frame on desktop, use mobile font size for authentic mobile experience */
  html.phone-frame-active {
    font-size: 17px; /* Match mobile font size when phone frame is active */
  }
  
  body {
    overflow-y: auto; /* Only show scrollbar when content overflows */
    overflow-x: hidden; /* Prevent horizontal scrolling */
  }
  
  /* Text selection styles */
  ::selection {
    background-color: #3b82f6; /* blue-500 */
    color: white;
  }
  
  ::-moz-selection {
    background-color: #3b82f6; /* blue-500 */
    color: white;
  }
  
  /* Ensure proper padding on mobile */
  @media (max-width: 640px) {
    body {
      padding-left: env(safe-area-inset-left, 0);
      padding-right: env(safe-area-inset-right, 0);
    }
  }
  
  /* Adjust for mobile devices */
  @media (max-width: 640px) {
    html {
      font-size: 17px; /* Slightly smaller on mobile for better fit */
    }
  }
}

@layer utilities {
  .animate-pulse-slow {
    animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  /* Safe area insets for mobile browsers */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 1rem);
  }
  
  .pt-safe {
    padding-top: env(safe-area-inset-top, 1rem);
  }
  
  .min-h-screen-safe {
    min-height: 100vh;
    min-height: 100dvh; /* Dynamic viewport height for mobile browsers */
  }
}

@keyframes pulse-slow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.95;
  }
}

/* Phone Frame Styles */
@layer utilities {
  /* Hide scrollbar for phone frame content while keeping scroll functionality */
  .phone-frame-content {
    /* Hide scrollbar for Chrome, Safari and Opera */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  .phone-frame-content::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
  }
  
  /* Custom scrollbar for other components that use scrollbar-thin */
  .scrollbar-thin::-webkit-scrollbar {
    width: 4px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.5);
    border-radius: 2px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgba(156, 163, 175, 0.7);
  }
}

/* Force mobile breakpoints inside phone frame */
/* Override all Tailwind responsive breakpoints to behave as mobile */
.phone-frame-mobile {
  /* Set a max-width context to force mobile breakpoints */
  max-width: 390px;
  width: 100%;
  /* Force all children to use mobile breakpoints */
  font-size: 17px;
}

/* Disable all md: (768px+) breakpoints inside phone frame */
/* Force mobile-only rendering regardless of actual viewport size */
/* This is applied when viewport is desktop but we're inside phone frame */
@media (min-width: 768px) {
  /* Hide desktop-only elements */
  .phone-frame-mobile .md\:hidden {
    display: none !important;
  }
  
  /* Show mobile elements even when md: classes say to hide */
  .phone-frame-mobile .md\:flex {
    display: none !important;
  }
  
  .phone-frame-mobile .md\:block {
    display: none !important;
  }
  
  /* Override max-width utilities - force mobile widths */
  .phone-frame-mobile .md\:max-w-full,
  .phone-frame-mobile .md\:max-w-2xl,
  .phone-frame-mobile .md\:max-w-4xl {
    max-width: 100% !important;
  }
  
  /* Override layout utilities */
  .phone-frame-mobile .md\:items-center {
    align-items: flex-start !important;
  }
  
  .phone-frame-mobile .md\:justify-center {
    justify-content: flex-start !important;
  }
  
  /* Override spacing - use mobile values */
  .phone-frame-mobile .md\:p-4,
  .phone-frame-mobile .md\:p-6 {
    padding: 1rem !important;
  }
  
  .phone-frame-mobile .md\:px-6 {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  .phone-frame-mobile .md\:py-6 {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  }
  
  /* Override typography - use mobile sizes */
  .phone-frame-mobile .md\:text-xl {
    font-size: 1.125rem !important;
  }
  
  .phone-frame-mobile .md\:text-2xl {
    font-size: 1.5rem !important;
  }
  
  .phone-frame-mobile .md\:text-3xl {
    font-size: 1.875rem !important;
  }
  
  /* Override border radius */
  .phone-frame-mobile .md\:rounded-3xl {
    border-radius: 1rem !important;
  }
  
  /* Disable desktop animations */
  .phone-frame-mobile .md\:slide-in-from-bottom-0 {
    animation: none !important;
  }
  
  /* Ensure sm: breakpoints still work (they're mobile-friendly) */
  /* sm: breakpoints (640px+) should work normally inside phone frame */
}